import{F as A,D as N,a as m,C as T,b,c as y}from"./client-CGHOAofw.js";var w=({children:i,fallback:d})=>{const c=A({children:i});return c[N]=(l,o)=>{if(!(l instanceof Promise))throw l;return l.finally(o),d},c};const v=(i,d)=>{const c=async(a,n)=>{const e=n.childNodes[n.childNodes.length-1];(e==null?void 0:e.nodeName)==="TEMPLATE"&&(e==null?void 0:e.getAttribute(y))!==null&&(a.children=await o(e.content.childNodes))},l=async a=>{const n={children:await o(a.childNodes)},e=a.attributes;for(let t=0;t<e.length;t++)n[e[t].name]=e[t].value;return i(a.nodeName,n)},o=async a=>{const n=[];for(let e=0;e<a.length;e++){const t=a[e];if(t.nodeType!==8)if(t.nodeType===3)n.push(t.textContent);else if(t.nodeName==="TEMPLATE"&&t.id.match(/(?:H|E):\d+/)){const r=document.createElement("hono-placeholder");r.style.display="none";let p;const f=new Promise(s=>p=s);t.replaceWith=s=>{o(s.childNodes).then(p),r.remove()};let h=[];for(r.appendChild(t);e<a.length;e++){const s=a[e];if(s.nodeType===8){r.appendChild(s),e--;break}else s.nodeType===3?h.push(s.textContent):h.push(await l(s))}const u=document.querySelectorAll(`[data-hono-target="${t.id}"]`);if(u.length>0){const s=u[u.length-1];h=await o(s.content.childNodes)}if(h.length===0&&t.id.startsWith("E:")){let s;const g=new Promise(E=>s=E);h=await i(w,{fallback:[],children:[await i(()=>m(g),{})]}),r.insertBefore=E=>{o(E.childNodes).then(s)}}document.body.appendChild(r),n.push(await i(w,{fallback:h,children:[await i(()=>m(f),{})]}))}else{let r;const p=t.getAttribute(T);if(p&&(r=await d(p)),r){const f=JSON.parse(t.getAttribute(b)||"{}");await c(f,t),n.push(await i(r,f))}else n.push(await l(t))}}return n};return o},S=async i=>{const d=new Set,c=new Set;if(document.querySelectorAll('template[id^="H:"], template[id^="E:"]').forEach(o=>{o.parentElement&&(d.add(o),c.add(o.parentElement))}),c.size===0)return;const l=new MutationObserver(o=>{const a=new Set;o.forEach(n=>{n.target instanceof Element&&(a.add(n.target),n.removedNodes.forEach(e=>{d.delete(e)}))}),a.forEach(n=>{i(n)}),d.size===0&&l.disconnect()});c.forEach(o=>{l.observe(o,{childList:!0})})};export{v as buildCreateChildrenFn,S as hydrateComponentHonoSuspense};
